(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory(require("@angular/core"), require("@angular/forms"));
	else if(typeof define === 'function' && define.amd)
		define(["@angular/core", "@angular/forms"], factory);
	else if(typeof exports === 'object')
		exports["ng2-directive-utils"] = factory(require("@angular/core"), require("@angular/forms"));
	else
		root["ng2-directive-utils"] = factory(root["@angular/core"], root["@angular/forms"]);
})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_1__) {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 7);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_0__;

/***/ }),
/* 1 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_1__;

/***/ }),
/* 2 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__angular_core__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__angular_forms__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__input_mask__ = __webpack_require__(6);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return InputMask; });
/**
 * Created by George Frick on 2/5/2017.
 * input-mask="**-**-****" // ssn excample
 */
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var InputMask = (function () {
    function InputMask(formControl, ele) {
        this.formControl = formControl;
        this.ele = ele;
        this.inputMask = null;
    }
    Object.defineProperty(InputMask.prototype, "mask", {
        set: function (value) {
            this._mask = value;
            if (this._mask) {
                this.inputMask = new __WEBPACK_IMPORTED_MODULE_2__input_mask__["a" /* InputMaskModel */](this._mask);
            }
        },
        enumerable: true,
        configurable: true
    });
    InputMask.prototype.onInputChange = function () {
        this.update();
    };
    InputMask.prototype.setInitialCaretPosition = function () {
        if (!this.inputMask) {
            return;
        }
        this.ele.nativeElement.selectionStart = 0;
        var value = this.formControl.value || "";
        this.ele.nativeElement.selectionEnd = value.length;
    };
    InputMask.prototype.update = function () {
        if (!this.inputMask) {
            return;
        }
        var caretPosition = this.ele.nativeElement.selectionStart;
        this.modelValue = this.inputMask.unmaskValue(this.formControl.value);
        this.viewValue = this.inputMask.maskValue(this.modelValue);
        this.formControl.viewToModelUpdate(this.inputMask.realValue(this.viewValue));
        this.formControl.valueAccessor.writeValue(this.inputMask.realValue(this.viewValue));
        caretPosition = this.inputMask.getNextCaretPosition(this.viewValue, caretPosition);
        this.ele.nativeElement.selectionStart = caretPosition;
        this.ele.nativeElement.selectionEnd = caretPosition;
    };
    return InputMask;
}());
__decorate([
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Input"])("input-mask"),
    __metadata("design:type", String),
    __metadata("design:paramtypes", [String])
], InputMask.prototype, "mask", null);
__decorate([
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__angular_core__["HostListener"])("input"),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", void 0)
], InputMask.prototype, "onInputChange", null);
__decorate([
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__angular_core__["HostListener"])("click"),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", void 0)
], InputMask.prototype, "setInitialCaretPosition", null);
InputMask = __decorate([
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Directive"])({
        selector: "[input-mask]"
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_forms__["NgControl"],
        __WEBPACK_IMPORTED_MODULE_0__angular_core__["ElementRef"]])
], InputMask);



/***/ }),
/* 3 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__angular_core__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__angular_forms__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return LowercaseDirective; });
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var LowercaseDirective = (function () {
    function LowercaseDirective(ctrl) {
        this.ctrl = ctrl;
    }
    LowercaseDirective.prototype.onInputChange = function () {
        var newValue = this.ctrl.value.toUpperCase();
        this.ctrl.reset(newValue);
    };
    return LowercaseDirective;
}());
LowercaseDirective = __decorate([
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Directive"])({
        selector: "[lowercase]",
        host: {
            "(input)": "onInputChange()"
        }
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_forms__["NgControl"]])
], LowercaseDirective);



/***/ }),
/* 4 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__angular_core__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__angular_forms__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return UppercaseDirective; });
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var UppercaseDirective = (function () {
    function UppercaseDirective(ctrl) {
        this.ctrl = ctrl;
    }
    UppercaseDirective.prototype.onInputChange = function () {
        var newValue = this.ctrl.value.toLowerCase();
        this.ctrl.reset(newValue);
    };
    return UppercaseDirective;
}());
UppercaseDirective = __decorate([
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Directive"])({
        selector: "[uppercase]",
        host: {
            "(input)": "onInputChange()"
        }
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_forms__["NgControl"]])
], UppercaseDirective);



/***/ }),
/* 5 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__angular_core__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_input_mask_directive__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__src_lowercase_directive__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__src_uppercase_directive__ = __webpack_require__(4);
/* harmony namespace reexport (by used) */ __webpack_require__.d(__webpack_exports__, "b", function() { return __WEBPACK_IMPORTED_MODULE_1__src_input_mask_directive__["a"]; });
/* harmony namespace reexport (by used) */ __webpack_require__.d(__webpack_exports__, "c", function() { return __WEBPACK_IMPORTED_MODULE_3__src_uppercase_directive__["a"]; });
/* harmony namespace reexport (by used) */ __webpack_require__.d(__webpack_exports__, "d", function() { return __WEBPACK_IMPORTED_MODULE_2__src_lowercase_directive__["a"]; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DirectiveUtilModule; });
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};







var DirectiveUtilModule = DirectiveUtilModule_1 = (function () {
    function DirectiveUtilModule() {
    }
    DirectiveUtilModule.forRoot = function () {
        return {
            ngModule: DirectiveUtilModule_1
        };
    };
    return DirectiveUtilModule;
}());
DirectiveUtilModule = DirectiveUtilModule_1 = __decorate([
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__angular_core__["NgModule"])({
        declarations: [
            __WEBPACK_IMPORTED_MODULE_1__src_input_mask_directive__["a" /* InputMask */], __WEBPACK_IMPORTED_MODULE_2__src_lowercase_directive__["a" /* LowercaseDirective */], __WEBPACK_IMPORTED_MODULE_3__src_uppercase_directive__["a" /* UppercaseDirective */]
        ],
        exports: [
            __WEBPACK_IMPORTED_MODULE_1__src_input_mask_directive__["a" /* InputMask */], __WEBPACK_IMPORTED_MODULE_2__src_lowercase_directive__["a" /* LowercaseDirective */], __WEBPACK_IMPORTED_MODULE_3__src_uppercase_directive__["a" /* UppercaseDirective */]
        ]
    })
], DirectiveUtilModule);

var DirectiveUtilModule_1;


/***/ }),
/* 6 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return InputMaskModel; });
/**
 * Created by George Frick on 2/5/2017.
 */
var InputMaskModel = (function () {
    function InputMaskModel(maskPattern) {
        this.originalStringPattern = maskPattern;
        this.dividerCharacterSet = this.extractDividers(maskPattern);
    }
    Object.defineProperty(InputMaskModel.prototype, "originalPattern", {
        get: function () {
            return this.originalStringPattern;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(InputMaskModel.prototype, "dividerCharSet", {
        get: function () {
            return this.dividerCharacterSet;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(InputMaskModel.prototype, "placeHolderCount", {
        /**
         * Count the number of place holder values in the original pattern.
         * @returns {number}
         */
        get: function () {
            return (this.originalPattern.match(/\*/g) || []).length;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Create an array representing all of the placeholder characters used
     * in the pattern. Currently this is anything not "$" and at least ["_"]
     * @param originalPattern
     * @returns {string[]}
     */
    InputMaskModel.prototype.extractDividers = function (originalPattern) {
        var dividers = originalPattern.replace(/\*/g, "").split("");
        //  dividers.push("_");
        return dividers;
    };
    /**
     * Is a given character a divider character?
     * @param character
     * @returns {boolean}
     */
    InputMaskModel.prototype.isDivider = function (character) {
        for (var dividerSetLoop = 0; dividerSetLoop < this.dividerCharSet.length; dividerSetLoop++) {
            if (character === this.dividerCharSet[dividerSetLoop]) {
                return true;
            }
        }
        return false;
    };
    Object.defineProperty(InputMaskModel.prototype, "maskedPattern", {
        /**
         * will turn X$$$X => X{0}{1}{2}X
         * @param patternString
         * @returns  X$$$X => X{0}{1}{2}X
         */
        get: function () {
            var generatedPattern = this.originalPattern;
            for (var patternIndex = 0; patternIndex < this.placeHolderCount; patternIndex++) {
                generatedPattern = generatedPattern.replace(/\*/, "{" + patternIndex + "}");
            }
            return generatedPattern;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Given a non-masked value; use the maskedPattern to create a masked value.
     * @param nonMaskedValue
     * @returns {string}
     */
    InputMaskModel.prototype.maskValue = function (nonMaskedValue) {
        var formattedString = this.maskedPattern;
        var replacement;
        var inputValue = nonMaskedValue || "";
        inputValue = this.unmaskValue(inputValue);
        for (var i = 0; i < this.placeHolderCount; i++) {
            replacement = inputValue.charAt(i) || "_";
            formattedString = formattedString.replace("{" + i + "}", replacement);
        }
        return formattedString;
    };
    /**
     * This is the current value when dividers are removed
     * @returns 9-5_1 => 951
     */
    InputMaskModel.prototype.unmaskValue = function (inputValue) {
        if (!inputValue) {
            return "";
        }
        var modelValue = inputValue;
        for (var dividerIndex = 0; dividerIndex < this.dividerCharSet.length; dividerIndex++) {
            while (modelValue.indexOf(this.dividerCharSet[dividerIndex]) > -1) {
                modelValue = modelValue.replace(this.dividerCharSet[dividerIndex], "");
            }
        }
        return modelValue.replace(/_/g, "");
    };
    /**
     * This is the current value when place holders are removed
     * @returns 9-5_ => 9-5
     */
    InputMaskModel.prototype.realValue = function (inputValue) {
        if (!inputValue || this.unmaskValue(inputValue) === "") {
            return "";
        }
        else {
            return inputValue.replace(/[*_]/g, "");
        }
    };
    InputMaskModel.prototype.getNextCaretPosition = function (viewValue, currentCaretPosition) {
        // Cursor can always be at 0.
        if (currentCaretPosition <= 0) {
            return 0;
        }
        // Cursor can't be positioned after a spacer.
        var firstSpacer = viewValue.indexOf("_");
        if (firstSpacer >= 0 && firstSpacer < currentCaretPosition) {
            return firstSpacer;
        }
        // Cursor
        while (this.isDivider(viewValue.charAt(currentCaretPosition))) {
            currentCaretPosition++;
        }
        return currentCaretPosition;
    };
    return InputMaskModel;
}());



/***/ }),
/* 7 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__index__ = __webpack_require__(5);
/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, "DirectiveUtilModule", function() { return __WEBPACK_IMPORTED_MODULE_0__index__["a"]; });
/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, "InputMask", function() { return __WEBPACK_IMPORTED_MODULE_0__index__["b"]; });
/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, "UppercaseDirective", function() { return __WEBPACK_IMPORTED_MODULE_0__index__["c"]; });
/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, "LowercaseDirective", function() { return __WEBPACK_IMPORTED_MODULE_0__index__["d"]; });



/***/ })
/******/ ]);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA2ZjY3MTIxMjRjMDA2N2ZkMTY0NCIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAYW5ndWxhci9jb3JlXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQGFuZ3VsYXIvZm9ybXNcIiIsIndlYnBhY2s6Ly8vLi9zcmMvaW5wdXQtbWFzay5kaXJlY3RpdmUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xvd2VyY2FzZS5kaXJlY3RpdmUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3VwcGVyY2FzZS5kaXJlY3RpdmUudHMiLCJ3ZWJwYWNrOi8vLy4vaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2lucHV0LW1hc2sudHMiLCJ3ZWJwYWNrOi8vLy4vbmcyLWRpcmVjdGl2ZS11dGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsTztBQ1ZBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLG1EQUEyQyxjQUFjOztBQUV6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1DQUEyQiwwQkFBMEIsRUFBRTtBQUN2RCx5Q0FBaUMsZUFBZTtBQUNoRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4REFBc0QsK0RBQStEOztBQUVySDtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7QUNoRUEsK0M7Ozs7OztBQ0FBLCtDOzs7Ozs7Ozs7Ozs7QUNBQTtBQUFBOzs7R0FHRzs7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QUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsQ0FBQztRQUMzQyxDQUFDO0lBQ0wsQ0FBQztJQUVNLDZDQUFvQixHQUEzQixVQUE0QixTQUFpQixFQUFFLG9CQUE0QjtRQUN2RSw2QkFBNkI7UUFDN0IsRUFBRSxDQUFDLENBQUMsb0JBQW9CLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM1QixNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQ2IsQ0FBQztRQUNELDZDQUE2QztRQUM3QyxJQUFJLFdBQVcsR0FBRyxTQUFTLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3pDLEVBQUUsQ0FBQyxDQUFDLFdBQVcsSUFBSSxDQUFDLElBQUksV0FBVyxHQUFHLG9CQUFvQixDQUFDLENBQUMsQ0FBQztZQUN6RCxNQUFNLENBQUMsV0FBVyxDQUFDO1FBQ3ZCLENBQUM7UUFDRCxTQUFTO1FBQ1QsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxFQUFFLENBQUM7WUFDNUQsb0JBQW9CLEVBQUUsQ0FBQztRQUMzQixDQUFDO1FBQ0QsTUFBTSxDQUFDLG9CQUFvQixDQUFDO0lBQ2hDLENBQUM7SUFFTCxxQkFBQztBQUFELENBQUM7Ozs7Ozs7Ozs7Ozs7OztBQ3JJdUIiLCJmaWxlIjoibmcyLWRpcmVjdGl2ZS11dGlscy51bWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJAYW5ndWxhci9jb3JlXCIpLCByZXF1aXJlKFwiQGFuZ3VsYXIvZm9ybXNcIikpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW1wiQGFuZ3VsYXIvY29yZVwiLCBcIkBhbmd1bGFyL2Zvcm1zXCJdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIm5nMi1kaXJlY3RpdmUtdXRpbHNcIl0gPSBmYWN0b3J5KHJlcXVpcmUoXCJAYW5ndWxhci9jb3JlXCIpLCByZXF1aXJlKFwiQGFuZ3VsYXIvZm9ybXNcIikpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIm5nMi1kaXJlY3RpdmUtdXRpbHNcIl0gPSBmYWN0b3J5KHJvb3RbXCJAYW5ndWxhci9jb3JlXCJdLCByb290W1wiQGFuZ3VsYXIvZm9ybXNcIl0pO1xufSkodGhpcywgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8wX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMV9fKSB7XG5yZXR1cm4gXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBpZGVudGl0eSBmdW5jdGlvbiBmb3IgY2FsbGluZyBoYXJtb255IGltcG9ydHMgd2l0aCB0aGUgY29ycmVjdCBjb250ZXh0XG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmkgPSBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH07XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9cIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA3KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCA2ZjY3MTIxMjRjMDA2N2ZkMTY0NCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8wX187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAYW5ndWxhci9jb3JlXCJcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzFfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBhbmd1bGFyL2Zvcm1zXCJcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgR2VvcmdlIEZyaWNrIG9uIDIvNS8yMDE3LlxyXG4gKiBpbnB1dC1tYXNrPVwiKiotKiotKioqKlwiIC8vIHNzbiBleGNhbXBsZVxyXG4gKi9cclxuXHJcbmltcG9ydCB7RGlyZWN0aXZlLCBFbGVtZW50UmVmLCBIb3N0TGlzdGVuZXIsIElucHV0fSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xyXG5pbXBvcnQge05nQ29udHJvbH0gZnJvbSBcIkBhbmd1bGFyL2Zvcm1zXCI7XHJcbmltcG9ydCB7SW5wdXRNYXNrTW9kZWx9IGZyb20gXCIuL2lucHV0LW1hc2tcIjtcclxuXHJcbkBEaXJlY3RpdmUoe1xyXG4gICAgc2VsZWN0b3I6IFwiW2lucHV0LW1hc2tdXCJcclxufSlcclxuZXhwb3J0IGNsYXNzIElucHV0TWFzayB7XHJcblxyXG4gICAgcHVibGljIG1vZGVsVmFsdWU6IHN0cmluZztcclxuICAgIHB1YmxpYyB2aWV3VmFsdWU6IHN0cmluZztcclxuICAgIHB1YmxpYyBpbnB1dE1hc2s6IElucHV0TWFza01vZGVsO1xyXG4gICAgcHJpdmF0ZSBfbWFzazogc3RyaW5nO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBmb3JtQ29udHJvbDogTmdDb250cm9sLFxyXG4gICAgICAgICAgICAgICAgcHVibGljIGVsZTogRWxlbWVudFJlZikge1xyXG4gICAgICAgIHRoaXMuaW5wdXRNYXNrID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBASW5wdXQoXCJpbnB1dC1tYXNrXCIpXHJcbiAgICBzZXQgbWFzayh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5fbWFzayA9IHZhbHVlO1xyXG4gICAgICAgIGlmICh0aGlzLl9tYXNrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5wdXRNYXNrID0gbmV3IElucHV0TWFza01vZGVsKHRoaXMuX21hc2spO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBASG9zdExpc3RlbmVyKFwiaW5wdXRcIilcclxuICAgIHB1YmxpYyBvbklucHV0Q2hhbmdlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudXBkYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgQEhvc3RMaXN0ZW5lcihcImNsaWNrXCIpXHJcbiAgICBwdWJsaWMgc2V0SW5pdGlhbENhcmV0UG9zaXRpb24oKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlucHV0TWFzaykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZWxlLm5hdGl2ZUVsZW1lbnQuc2VsZWN0aW9uU3RhcnQgPSAwO1xyXG4gICAgICAgIGxldCB2YWx1ZSA9IHRoaXMuZm9ybUNvbnRyb2wudmFsdWUgfHwgXCJcIjtcclxuICAgICAgICB0aGlzLmVsZS5uYXRpdmVFbGVtZW50LnNlbGVjdGlvbkVuZCA9IHZhbHVlLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5pbnB1dE1hc2spIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgY2FyZXRQb3NpdGlvbiA9IHRoaXMuZWxlLm5hdGl2ZUVsZW1lbnQuc2VsZWN0aW9uU3RhcnQ7XHJcblxyXG4gICAgICAgIHRoaXMubW9kZWxWYWx1ZSA9IHRoaXMuaW5wdXRNYXNrLnVubWFza1ZhbHVlKHRoaXMuZm9ybUNvbnRyb2wudmFsdWUpO1xyXG4gICAgICAgIHRoaXMudmlld1ZhbHVlID0gdGhpcy5pbnB1dE1hc2subWFza1ZhbHVlKHRoaXMubW9kZWxWYWx1ZSk7XHJcbiAgICAgICAgdGhpcy5mb3JtQ29udHJvbC52aWV3VG9Nb2RlbFVwZGF0ZSh0aGlzLmlucHV0TWFzay5yZWFsVmFsdWUodGhpcy52aWV3VmFsdWUpKTtcclxuICAgICAgICB0aGlzLmZvcm1Db250cm9sLnZhbHVlQWNjZXNzb3Iud3JpdGVWYWx1ZSh0aGlzLmlucHV0TWFzay5yZWFsVmFsdWUodGhpcy52aWV3VmFsdWUpKTtcclxuXHJcbiAgICAgICAgY2FyZXRQb3NpdGlvbiA9IHRoaXMuaW5wdXRNYXNrLmdldE5leHRDYXJldFBvc2l0aW9uKHRoaXMudmlld1ZhbHVlLCBjYXJldFBvc2l0aW9uKTtcclxuICAgICAgICB0aGlzLmVsZS5uYXRpdmVFbGVtZW50LnNlbGVjdGlvblN0YXJ0ID0gY2FyZXRQb3NpdGlvbjtcclxuICAgICAgICB0aGlzLmVsZS5uYXRpdmVFbGVtZW50LnNlbGVjdGlvbkVuZCA9IGNhcmV0UG9zaXRpb247XHJcbiAgICB9XHJcbn1cclxuXHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vdHNsaW50LWxvYWRlciEuL3NyYy9pbnB1dC1tYXNrLmRpcmVjdGl2ZS50cyIsImltcG9ydCB7RGlyZWN0aXZlfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7TmdDb250cm9sfSBmcm9tIFwiQGFuZ3VsYXIvZm9ybXNcIjtcblxuXG5ARGlyZWN0aXZlKHtcbiAgICBzZWxlY3RvcjogXCJbbG93ZXJjYXNlXVwiLFxuICAgIGhvc3Q6IHtcbiAgICAgICAgXCIoaW5wdXQpXCI6IFwib25JbnB1dENoYW5nZSgpXCJcbiAgICB9XG59KVxuZXhwb3J0IGNsYXNzIExvd2VyY2FzZURpcmVjdGl2ZSAge1xuXG4gICAgY29uc3RydWN0b3IoIHByaXZhdGUgY3RybDogTmdDb250cm9sICkge31cblxuICAgIHB1YmxpYyBvbklucHV0Q2hhbmdlKCkge1xuICAgICAgICBsZXQgbmV3VmFsdWUgPSB0aGlzLmN0cmwudmFsdWUudG9VcHBlckNhc2UoKTtcbiAgICAgICAgdGhpcy5jdHJsLnJlc2V0KG5ld1ZhbHVlKTtcbiAgICB9XG5cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vdHNsaW50LWxvYWRlciEuL3NyYy9sb3dlcmNhc2UuZGlyZWN0aXZlLnRzIiwiaW1wb3J0IHtEaXJlY3RpdmV9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtOZ0NvbnRyb2x9IGZyb20gXCJAYW5ndWxhci9mb3Jtc1wiO1xuXG5cbkBEaXJlY3RpdmUoe1xuICAgIHNlbGVjdG9yOiBcIlt1cHBlcmNhc2VdXCIsXG4gICAgaG9zdDoge1xuICAgICAgICBcIihpbnB1dClcIjogXCJvbklucHV0Q2hhbmdlKClcIlxuICAgIH1cbn0pXG5leHBvcnQgY2xhc3MgVXBwZXJjYXNlRGlyZWN0aXZlICB7XG5cbiAgICBjb25zdHJ1Y3RvciggcHJpdmF0ZSBjdHJsOiBOZ0NvbnRyb2wgKSB7fVxuXG4gICAgcHVibGljIG9uSW5wdXRDaGFuZ2UoKSB7XG4gICAgICAgIGxldCBuZXdWYWx1ZSA9IHRoaXMuY3RybC52YWx1ZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB0aGlzLmN0cmwucmVzZXQobmV3VmFsdWUpO1xuICAgIH1cblxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi90c2xpbnQtbG9hZGVyIS4vc3JjL3VwcGVyY2FzZS5kaXJlY3RpdmUudHMiLCJpbXBvcnQge05nTW9kdWxlLCBNb2R1bGVXaXRoUHJvdmlkZXJzfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHtJbnB1dE1hc2t9IGZyb20gXCIuL3NyYy9pbnB1dC1tYXNrLmRpcmVjdGl2ZVwiO1xuaW1wb3J0IHtMb3dlcmNhc2VEaXJlY3RpdmV9IGZyb20gXCIuL3NyYy9sb3dlcmNhc2UuZGlyZWN0aXZlXCI7XG5pbXBvcnQge1VwcGVyY2FzZURpcmVjdGl2ZX0gZnJvbSBcIi4vc3JjL3VwcGVyY2FzZS5kaXJlY3RpdmVcIjtcblxuZXhwb3J0ICogZnJvbSBcIi4vc3JjL2lucHV0LW1hc2suZGlyZWN0aXZlXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9zcmMvdXBwZXJjYXNlLmRpcmVjdGl2ZVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vc3JjL2xvd2VyY2FzZS5kaXJlY3RpdmVcIjtcblxuQE5nTW9kdWxlKHtcbiAgICBkZWNsYXJhdGlvbnM6IFtcbiAgICAgICAgSW5wdXRNYXNrLCBMb3dlcmNhc2VEaXJlY3RpdmUsIFVwcGVyY2FzZURpcmVjdGl2ZVxuICAgIF0sXG4gICAgZXhwb3J0czogW1xuICAgICAgICBJbnB1dE1hc2ssIExvd2VyY2FzZURpcmVjdGl2ZSwgVXBwZXJjYXNlRGlyZWN0aXZlXG4gICAgXVxufSlcbmV4cG9ydCBjbGFzcyBEaXJlY3RpdmVVdGlsTW9kdWxlIHtcbiAgICBzdGF0aWMgZm9yUm9vdCgpOiBNb2R1bGVXaXRoUHJvdmlkZXJzIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5nTW9kdWxlOiBEaXJlY3RpdmVVdGlsTW9kdWxlXG4gICAgICAgIH07XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi90c2xpbnQtbG9hZGVyIS4vaW5kZXgudHMiLCIvKipcclxuICogQ3JlYXRlZCBieSBHZW9yZ2UgRnJpY2sgb24gMi81LzIwMTcuXHJcbiAqL1xyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBJbnB1dE1hc2tNb2RlbCB7XHJcblxyXG4gICAgcHJpdmF0ZSBkaXZpZGVyQ2hhcmFjdGVyU2V0OiBzdHJpbmdbXTtcclxuICAgIHByaXZhdGUgb3JpZ2luYWxTdHJpbmdQYXR0ZXJuOiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3IobWFza1BhdHRlcm46IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMub3JpZ2luYWxTdHJpbmdQYXR0ZXJuID0gbWFza1BhdHRlcm47XHJcbiAgICAgICAgdGhpcy5kaXZpZGVyQ2hhcmFjdGVyU2V0ID0gdGhpcy5leHRyYWN0RGl2aWRlcnMobWFza1BhdHRlcm4pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgb3JpZ2luYWxQYXR0ZXJuKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9yaWdpbmFsU3RyaW5nUGF0dGVybjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGRpdmlkZXJDaGFyU2V0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRpdmlkZXJDaGFyYWN0ZXJTZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb3VudCB0aGUgbnVtYmVyIG9mIHBsYWNlIGhvbGRlciB2YWx1ZXMgaW4gdGhlIG9yaWdpbmFsIHBhdHRlcm4uXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHBsYWNlSG9sZGVyQ291bnQoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMub3JpZ2luYWxQYXR0ZXJuLm1hdGNoKC9cXCovZykgfHwgW10pLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhbiBhcnJheSByZXByZXNlbnRpbmcgYWxsIG9mIHRoZSBwbGFjZWhvbGRlciBjaGFyYWN0ZXJzIHVzZWRcclxuICAgICAqIGluIHRoZSBwYXR0ZXJuLiBDdXJyZW50bHkgdGhpcyBpcyBhbnl0aGluZyBub3QgXCIkXCIgYW5kIGF0IGxlYXN0IFtcIl9cIl1cclxuICAgICAqIEBwYXJhbSBvcmlnaW5hbFBhdHRlcm5cclxuICAgICAqIEByZXR1cm5zIHtzdHJpbmdbXX1cclxuICAgICAqL1xyXG4gICAgcHVibGljIGV4dHJhY3REaXZpZGVycyhvcmlnaW5hbFBhdHRlcm46IHN0cmluZyk6IEFycmF5PHN0cmluZz4ge1xyXG4gICAgICAgIGxldCBkaXZpZGVycyA9IG9yaWdpbmFsUGF0dGVybi5yZXBsYWNlKC9cXCovZywgXCJcIikuc3BsaXQoXCJcIik7XHJcbiAgICAgICAgLy8gIGRpdmlkZXJzLnB1c2goXCJfXCIpO1xyXG4gICAgICAgIHJldHVybiBkaXZpZGVycztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIElzIGEgZ2l2ZW4gY2hhcmFjdGVyIGEgZGl2aWRlciBjaGFyYWN0ZXI/XHJcbiAgICAgKiBAcGFyYW0gY2hhcmFjdGVyXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgcHVibGljIGlzRGl2aWRlcihjaGFyYWN0ZXI6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGZvciAobGV0IGRpdmlkZXJTZXRMb29wID0gMDsgZGl2aWRlclNldExvb3AgPCB0aGlzLmRpdmlkZXJDaGFyU2V0Lmxlbmd0aDsgZGl2aWRlclNldExvb3ArKykge1xyXG4gICAgICAgICAgICBpZiAoY2hhcmFjdGVyID09PSB0aGlzLmRpdmlkZXJDaGFyU2V0W2RpdmlkZXJTZXRMb29wXSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogd2lsbCB0dXJuIFgkJCRYID0+IFh7MH17MX17Mn1YXHJcbiAgICAgKiBAcGFyYW0gcGF0dGVyblN0cmluZ1xyXG4gICAgICogQHJldHVybnMgIFgkJCRYID0+IFh7MH17MX17Mn1YXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbWFza2VkUGF0dGVybigpOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCBnZW5lcmF0ZWRQYXR0ZXJuID0gdGhpcy5vcmlnaW5hbFBhdHRlcm47XHJcbiAgICAgICAgZm9yIChsZXQgcGF0dGVybkluZGV4ID0gMDsgcGF0dGVybkluZGV4IDwgdGhpcy5wbGFjZUhvbGRlckNvdW50OyBwYXR0ZXJuSW5kZXgrKykge1xyXG4gICAgICAgICAgICBnZW5lcmF0ZWRQYXR0ZXJuID0gZ2VuZXJhdGVkUGF0dGVybi5yZXBsYWNlKC9cXCovLCBcIntcIiArIHBhdHRlcm5JbmRleCArIFwifVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGdlbmVyYXRlZFBhdHRlcm47XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHaXZlbiBhIG5vbi1tYXNrZWQgdmFsdWU7IHVzZSB0aGUgbWFza2VkUGF0dGVybiB0byBjcmVhdGUgYSBtYXNrZWQgdmFsdWUuXHJcbiAgICAgKiBAcGFyYW0gbm9uTWFza2VkVmFsdWVcclxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBtYXNrVmFsdWUobm9uTWFza2VkVmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IGZvcm1hdHRlZFN0cmluZyA9IHRoaXMubWFza2VkUGF0dGVybjtcclxuICAgICAgICBsZXQgcmVwbGFjZW1lbnQ6IHN0cmluZztcclxuICAgICAgICBsZXQgaW5wdXRWYWx1ZSA9IG5vbk1hc2tlZFZhbHVlIHx8IFwiXCI7XHJcbiAgICAgICAgaW5wdXRWYWx1ZSA9IHRoaXMudW5tYXNrVmFsdWUoaW5wdXRWYWx1ZSk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnBsYWNlSG9sZGVyQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICByZXBsYWNlbWVudCA9IGlucHV0VmFsdWUuY2hhckF0KGkpIHx8IFwiX1wiO1xyXG4gICAgICAgICAgICBmb3JtYXR0ZWRTdHJpbmcgPSBmb3JtYXR0ZWRTdHJpbmcucmVwbGFjZShcIntcIiArIGkgKyBcIn1cIiwgcmVwbGFjZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZm9ybWF0dGVkU3RyaW5nO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBpcyB0aGUgY3VycmVudCB2YWx1ZSB3aGVuIGRpdmlkZXJzIGFyZSByZW1vdmVkXHJcbiAgICAgKiBAcmV0dXJucyA5LTVfMSA9PiA5NTFcclxuICAgICAqL1xyXG4gICAgcHVibGljIHVubWFza1ZhbHVlKGlucHV0VmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKCFpbnB1dFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgbW9kZWxWYWx1ZSA9IGlucHV0VmFsdWU7XHJcbiAgICAgICAgZm9yIChsZXQgZGl2aWRlckluZGV4ID0gMDsgZGl2aWRlckluZGV4IDwgdGhpcy5kaXZpZGVyQ2hhclNldC5sZW5ndGg7IGRpdmlkZXJJbmRleCsrKSB7XHJcbiAgICAgICAgICAgIHdoaWxlIChtb2RlbFZhbHVlLmluZGV4T2YodGhpcy5kaXZpZGVyQ2hhclNldFtkaXZpZGVySW5kZXhdKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBtb2RlbFZhbHVlID0gbW9kZWxWYWx1ZS5yZXBsYWNlKHRoaXMuZGl2aWRlckNoYXJTZXRbZGl2aWRlckluZGV4XSwgXCJcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1vZGVsVmFsdWUucmVwbGFjZSgvXy9nLCBcIlwiKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgaXMgdGhlIGN1cnJlbnQgdmFsdWUgd2hlbiBwbGFjZSBob2xkZXJzIGFyZSByZW1vdmVkXHJcbiAgICAgKiBAcmV0dXJucyA5LTVfID0+IDktNVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVhbFZhbHVlKGlucHV0VmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKCFpbnB1dFZhbHVlIHx8IHRoaXMudW5tYXNrVmFsdWUoaW5wdXRWYWx1ZSkgPT09IFwiXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlucHV0VmFsdWUucmVwbGFjZSgvWypfXS9nLCBcIlwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE5leHRDYXJldFBvc2l0aW9uKHZpZXdWYWx1ZTogc3RyaW5nLCBjdXJyZW50Q2FyZXRQb3NpdGlvbjogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICAvLyBDdXJzb3IgY2FuIGFsd2F5cyBiZSBhdCAwLlxyXG4gICAgICAgIGlmIChjdXJyZW50Q2FyZXRQb3NpdGlvbiA8PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBDdXJzb3IgY2FuJ3QgYmUgcG9zaXRpb25lZCBhZnRlciBhIHNwYWNlci5cclxuICAgICAgICBsZXQgZmlyc3RTcGFjZXIgPSB2aWV3VmFsdWUuaW5kZXhPZihcIl9cIik7XHJcbiAgICAgICAgaWYgKGZpcnN0U3BhY2VyID49IDAgJiYgZmlyc3RTcGFjZXIgPCBjdXJyZW50Q2FyZXRQb3NpdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gZmlyc3RTcGFjZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEN1cnNvclxyXG4gICAgICAgIHdoaWxlICh0aGlzLmlzRGl2aWRlcih2aWV3VmFsdWUuY2hhckF0KGN1cnJlbnRDYXJldFBvc2l0aW9uKSkpIHtcclxuICAgICAgICAgICAgY3VycmVudENhcmV0UG9zaXRpb24rKztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRDYXJldFBvc2l0aW9uO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuXHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vdHNsaW50LWxvYWRlciEuL3NyYy9pbnB1dC1tYXNrLnRzIiwiZXhwb3J0ICogZnJvbSAnLi9pbmRleCc7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi90c2xpbnQtbG9hZGVyIS4vbmcyLWRpcmVjdGl2ZS11dGlscy50cyJdLCJzb3VyY2VSb290IjoiIn0=